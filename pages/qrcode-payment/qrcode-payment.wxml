<!--pages/qrcode-payment/qrcode-payment.wxml-->
<view class="qrcode-payment-page">
  <!-- 头部 -->
  <view class="page-header">
    <text class="page-title">微信扫码支付</text>
    <text class="page-subtitle">请使用微信扫一扫完成支付</text>
  </view>

  <!-- 订单信息 -->
  <view class="order-info">
    <view class="info-item">
      <text class="info-label">订单号</text>
      <text class="info-value">{{orderNo}}</text>
    </view>
    <view class="info-item">
      <text class="info-label">支付金额</text>
      <text class="info-value amount">¥{{amount}}</text>
    </view>
  </view>

  <!-- 二维码区域 -->
  <view class="qrcode-section">
    <view class="qrcode-container">
      <!-- 加载状态 -->
      <view class="loading-overlay" wx:if="{{isLoading}}">
        <view class="loading-spinner"></view>
        <text class="loading-text">生成二维码中...</text>
      </view>
      
      <!-- 二维码画布 -->
      <canvas 
        type="2d" 
        id="qrcode-canvas" 
        class="qrcode-canvas"
        wx:if="{{!isLoading}}"
      ></canvas>
      
      <!-- 二维码说明 -->
      <view class="qrcode-tips" wx:if="{{!isLoading}}">
        <text class="tips-text">请使用微信扫一扫功能扫描上方二维码</text>
      </view>
    </view>
  </view>

  <!-- 二维码链接 -->
  <view class="qrcode-url-section" wx:if="{{!isLoading}}">
    <view class="url-header">
      <text class="url-title">二维码链接</text>
      <button class="copy-btn" bindtap="copyQRCodeUrl">复制链接</button>
    </view>
    <view class="url-content">
      <text class="url-text">{{qrCodeUrl}}</text>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-buttons">
    <button class="action-btn cancel-btn" bindtap="onPaymentCancel">取消支付</button>
    <button class="action-btn confirm-btn" bindtap="onPaymentCompleted">已完成支付</button>
  </view>

  <!-- 支付说明 -->
  <view class="payment-instructions">
    <view class="instruction-title">支付说明</view>
    <view class="instruction-list">
      <view class="instruction-item">1. 打开微信，点击右上角"+"号</view>
      <view class="instruction-item">2. 选择"扫一扫"功能</view>
      <view class="instruction-item">3. 扫描上方二维码完成支付</view>
      <view class="instruction-item">4. 支付完成后点击"已完成支付"按钮</view>
    </view>
  </view>
</view>
