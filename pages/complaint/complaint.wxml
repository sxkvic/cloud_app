<!--pages/complaint/complaint.wxml-->
<view class="complaint-page">
  <!-- 页面头部 -->
  <view class="page-header">
    <view class="header-icon">📢</view>
    <text class="page-title">投诉建议</text>
    <text class="page-subtitle">您的意见是我们改进的动力</text>
  </view>

  <!-- 投诉表单 -->
  <view class="complaint-form">
    <!-- 投诉类别 -->
    <view class="form-item">
      <view class="item-label">
        <text class="label-text">投诉类别</text>
        <text class="required">*</text>
      </view>
      <picker 
        mode="selector" 
        range="{{ complaintCategories }}" 
        range-key="name"
        value="{{ categoryIndex }}"
        bindchange="onCategoryChange"
      >
        <view class="picker-view">
          <text class="picker-text {{ categoryIndex >= 0 ? '' : 'placeholder' }}">
            {{ categoryIndex >= 0 ? complaintCategories[categoryIndex].name : '请选择投诉类别' }}
          </text>
          <text class="picker-arrow">›</text>
        </view>
      </picker>
    </view>

    <!-- 设备编号 -->
    <view class="form-item">
      <view class="item-label">
        <text class="label-text">设备编号</text>
      </view>
      <input 
        class="item-input"
        type="text"
        placeholder="请输入设备编号（选填）"
        value="{{ deviceNumber }}"
        bindinput="onDeviceNumberInput"
        maxlength="50"
      />
    </view>

    <!-- 联系电话 -->
    <view class="form-item">
      <view class="item-label">
        <text class="label-text">联系电话</text>
      </view>
      <input 
        class="item-input"
        type="number"
        placeholder="请输入联系电话（选填）"
        value="{{ contactPhone }}"
        bindinput="onPhoneInput"
        maxlength="20"
      />
    </view>

    <!-- 投诉内容 -->
    <view class="form-item textarea-item">
      <view class="item-label">
        <text class="label-text">投诉内容</text>
        <text class="required">*</text>
      </view>
      <textarea
        class="item-textarea"
        placeholder="请详细描述您的问题，我们会认真处理..."
        value="{{ complaintContent }}"
        bindinput="onContentInput"
        maxlength="500"
        auto-height
      ></textarea>
      <view class="input-counter">{{ complaintContent.length }}/500</view>
    </view>
  </view>

  <!-- 温馨提示 -->
  <view class="tips-card">
    <view class="tips-title">
      <text class="tips-icon">💡</text>
      <text>温馨提示</text>
    </view>
    <view class="tips-content">
      <view class="tip-item">• 我们将在24小时内处理您的投诉</view>
      <view class="tip-item">• 请如实填写投诉内容，以便我们更好地为您服务</view>
      <view class="tip-item">• 您的个人信息将被严格保密</view>
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-container">
    <button 
      class="submit-btn {{ canSubmit ? '' : 'disabled' }}" 
      disabled="{{ !canSubmit }}"
      bindtap="submitComplaint"
    >
      提交投诉
    </button>
  </view>
</view>