<!--pages/package-order/package-order.wxml-->
<view class="package-order-page">
    <!-- å¯æ»šåŠ¨å†…å®¹åŒºåŸŸ -->
    <scroll-view class="content-wrapper" scroll-y enhanced show-scrollbar="{{false}}">
        <!-- å¥—é¤åˆ—è¡¨ -->
        <view class="package-list">
            <view wx:for="{{ packages }}" wx:key="id" class="package-card {{ selectedPackage === item.id ? 'selected' : '' }}" bindtap="selectPackage" data-id="{{ item.id }}">
                <!-- çƒ­é—¨è§’æ ‡ -->
                <view class="popular-badge" wx:if="{{ item.isPopular }}">ç‰¹æƒ </view>
                
                <!-- å·¦ä¾§æµé‡å›¾æ ‡ -->
                <view class="data-thumb theme-{{ item.colorTheme }}">
                    <view class="signal-bg"></view>
                    <view class="data-content">
                        <view class="data-number">
                            <text class="data-num">{{ item.speed }}</text>
                            <text class="data-unit">{{ item.speedUnit }}</text>
                        </view>
                        <view class="data-type">å®½å¸¦</view>
                    </view>
                </view>
                
                <!-- å³ä¾§ä¿¡æ¯ -->
                <view class="package-info">
                    <view class="info-top">
                        <view class="package-header">
                            <view class="package-name">{{ item.name }}</view>
                            <view class="package-price">
                                <text class="price-symbol">Â¥</text>
                                <text class="price-value">{{ item.price }}</text>
                            </view>
                        </view>
                        <view class="package-desc" wx:if="{{ item.features.length > 0 }}">{{ item.features[0] }}</view>
                        
                        <!-- ç‰¹æ€§æ ‡ç­¾ -->
                        <view class="feature-tags">
                            <view wx:for="{{ item.featureTags }}" wx:for-item="tag" wx:key="*this" class="feature-tag theme-{{ item.colorTheme }}">
                                {{ tag }}
                            </view>
                        </view>
                    </view>
                    
                    <!-- è´­ä¹°æŒ‰é’® -->
                    <view class="buy-button-wrapper">
                        <view class="buy-button theme-{{ item.colorTheme }}">è´­ä¹°</view>
                    </view>
                </view>
            </view>
        </view>
    </scroll-view>

    <!-- è®¢è´­æŒ‰é’® -->
    <view class="order-section">
        <!-- æœªé€‰æ‹©æ—¶æ˜¾ç¤ºå¼•å¯¼ -->
        <view class="order-guide" wx:if="{{ !selectedPackage }}">
            <text class="guide-icon">ğŸ‘†</text>
            <text class="guide-text">è¯·åœ¨ä¸Šæ–¹é€‰æ‹©æ‚¨éœ€è¦çš„å¥—é¤</text>
        </view>

        <!-- å·²é€‰æ‹©æ—¶æ˜¾ç¤ºæ‘˜è¦ -->
        <view class="order-summary" wx:if="{{ selectedPackage && customerInfo }}">
            <view class="summary-row">
                <view class="summary-info">
                    <text class="summary-label">å®¢æˆ·</text>
                    <text class="summary-value">{{ customerInfo.customer_name || 'æœªçŸ¥' }}</text>
                </view>
                <view class="summary-info">
                    <text class="summary-label">å·²é€‰å¥—é¤</text>
                    <text class="summary-value">{{ selectedPackageName }}</text>
                </view>
            </view>
            <view class="summary-divider"></view>
            <view class="summary-price-row">
                <text class="price-label">é‡‘é¢</text>
                <text class="price-amount">Â¥{{ selectedPackagePrice }}</text>
            </view>
        </view>

        <button class="order-button {{ selectedPackage && customerInfo ? 'active' : 'disabled' }}" disabled="{{ !selectedPackage || !customerInfo }}" bindtap="confirmOrder">
            <text class="btn-text">{{ selectedPackage && customerInfo ? 'ç«‹å³è®¢è´­' : (customerInfo ? 'è¯·å…ˆé€‰æ‹©å¥—é¤' : 'åŠ è½½å®¢æˆ·ä¿¡æ¯ä¸­...') }}</text>
        </button>
    </view>
</view>