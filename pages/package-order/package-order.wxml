<!--pages/package-order/package-order.wxml-->
<view class="package-order-page">
    <!-- å¯æ»šåŠ¨å†…å®¹åŒºåŸŸ -->
    <scroll-view class="content-wrapper" scroll-y enhanced show-scrollbar="{{false}}">
        <!-- å¤´éƒ¨æ ‡é¢˜ -->
        <view class="page-header">
            <text class="page-title">å¥—é¤è®¢è´­</text>
            <text class="page-subtitle">é€‰æ‹©é€‚åˆæ‚¨çš„å®½å¸¦å¥—é¤</text>
        </view>

        <!-- å¥—é¤åˆ—è¡¨ -->
        <view class="package-list">
            <view wx:for="{{ packages }}" wx:key="id" class="package-item {{ selectedPackage === item.id ? 'selected' : '' }}" bindtap="selectPackage" data-id="{{ item.id }}">
                <view class="package-header">
                    <view class="package-name">{{ item.name }}</view>
                    <view class="package-badge" wx:if="{{ item.isPopular }}">çƒ­é—¨</view>
                </view>

                <view class="package-content">
                    <view class="package-speed">
                        <text class="speed-value">{{ item.speed }}</text>
                        <text class="speed-unit">Mbps</text>
                    </view>

                    <view class="package-features">
                        <view wx:for="{{ item.features }}" wx:key="*this" class="feature-item">
                            <text class="feature-icon">âœ“</text>
                            <text class="feature-text">{{ item }}</text>
                        </view>
                    </view>

                    <view class="package-price">
                        <text class="price-symbol">Â¥</text>
                        <text class="price-value">{{ item.price }}</text>
                    </view>
                </view>
            </view>
        </view>
    </scroll-view>

    <!-- è®¢è´­æŒ‰é’® -->
    <view class="order-section">
        <!-- æœªé€‰æ‹©æ—¶æ˜¾ç¤ºå¼•å¯¼ -->
        <view class="order-guide" wx:if="{{ !selectedPackage }}">
            <text class="guide-icon">ğŸ‘†</text>
            <text class="guide-text">è¯·åœ¨ä¸Šæ–¹é€‰æ‹©æ‚¨éœ€è¦çš„å¥—é¤</text>
        </view>

        <!-- å·²é€‰æ‹©æ—¶æ˜¾ç¤ºæ‘˜è¦ -->
        <view class="order-summary" wx:if="{{ selectedPackage && customerInfo }}">
            <view class="summary-row">
                <view class="summary-info">
                    <text class="summary-label">å®¢æˆ·</text>
                    <text class="summary-value">{{ customerInfo.customer_name || 'æœªçŸ¥' }}</text>
                </view>
                <view class="summary-info">
                    <text class="summary-label">å·²é€‰å¥—é¤</text>
                    <text class="summary-value">{{ selectedPackageName }}</text>
                </view>
            </view>
            <view class="summary-divider"></view>
            <view class="summary-price-row">
                <text class="price-label">é‡‘é¢</text>
                <text class="price-amount">Â¥{{ selectedPackagePrice }}</text>
            </view>
        </view>

        <button class="order-button {{ selectedPackage && customerInfo ? 'active' : 'disabled' }}" disabled="{{ !selectedPackage || !customerInfo }}" bindtap="confirmOrder">
            <text class="btn-text">{{ selectedPackage && customerInfo ? 'ç«‹å³è®¢è´­' : (customerInfo ? 'è¯·å…ˆé€‰æ‹©å¥—é¤' : 'åŠ è½½å®¢æˆ·ä¿¡æ¯ä¸­...') }}</text>
        </button>
    </view>
</view>