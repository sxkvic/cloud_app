<!--pages/invoice/invoice.wxml-->
<view class="invoice-page">
  <!-- 滚动内容区域 -->
  <scroll-view class="invoice-content" scroll-y>
    <!-- 页面头部 -->
    <view class="page-header">
      <text class="page-title">开票申请</text>
      <text class="page-subtitle">申请开具发票服务</text>
    </view>

    <!-- 开票表单 -->
  <view class="invoice-form">
    <view class="section-title">开票信息</view>
    
    <!-- 抬头类型 -->
    <view class="form-section">
      <view class="form-item">
        <text class="form-label required">抬头类型</text>
        <view class="radio-group">
          <view 
            class="radio-item {{ titleType === '2' ? 'selected' : '' }}"
            bindtap="selectTitleType"
            data-type="2"
          >
            <view class="radio-circle {{ titleType === '2' ? 'selected' : '' }}">
              <view class="radio-dot"></view>
            </view>
            <text class="radio-label">个人</text>
          </view>
          <view 
            class="radio-item {{ titleType === '1' ? 'selected' : '' }}"
            bindtap="selectTitleType"
            data-type="1"
          >
            <view class="radio-circle {{ titleType === '1' ? 'selected' : '' }}">
              <view class="radio-dot"></view>
            </view>
            <text class="radio-label">企业</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 发票抬头 -->
    <view class="form-section">
      <view class="form-item">
        <text class="form-label required">发票抬头</text>
        <input 
          class="form-input"
          type="text"
          placeholder="{{ titleType === '2' ? '请输入个人姓名' : '请输入企业名称' }}"
          value="{{ invoiceTitle }}"
          bindinput="onInvoiceTitleInput"
        />
      </view>
    </view>

    <!-- 发票类型 -->
    <view class="form-section">
      <view class="form-item">
        <text class="form-label required">发票类型</text>
        <view class="radio-group">
          <view 
            class="radio-item {{ invoiceType === 1 ? 'selected' : '' }}"
            bindtap="selectInvoiceType"
            data-type="1"
          >
            <view class="radio-circle {{ invoiceType === 1 ? 'selected' : '' }}">
              <view class="radio-dot"></view>
            </view>
            <text class="radio-label">增值税普通发票</text>
          </view>
          <view 
            class="radio-item {{ invoiceType === 2 ? 'selected' : '' }}"
            bindtap="selectInvoiceType"
            data-type="2"
          >
            <view class="radio-circle {{ invoiceType === 2 ? 'selected' : '' }}">
              <view class="radio-dot"></view>
            </view>
            <text class="radio-label">增值税专用发票</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 统一社会信用代码（企业必填） -->
    <view class="form-section" wx:if="{{ titleType === '1' }}">
      <view class="form-item">
        <text class="form-label required">统一社会信用代码</text>
        <input 
          class="form-input"
          type="text"
          placeholder="请输入统一社会信用代码"
          value="{{ socialCreditCode }}"
          bindinput="onSocialCreditCodeInput"
        />
      </view>
    </view>

    <!-- 接收邮箱 -->
    <view class="form-section">
      <view class="form-item">
        <text class="form-label required">接收邮箱</text>
        <input 
          class="form-input"
          type="text"
          placeholder="请输入接收邮箱"
          value="{{ receiveEmail }}"
          bindinput="onReceiveEmailInput"
        />
      </view>
    </view>

    <!-- 企业额外信息 -->
    <view wx:if="{{ titleType === '1' }}">
      <view class="form-section">
        <view class="form-item">
          <text class="form-label">开户银行</text>
          <input 
            class="form-input"
            type="text"
            placeholder="请输入开户银行"
            value="{{ bankName }}"
            bindinput="onBankNameInput"
          />
        </view>
      </view>

      <view class="form-section">
        <view class="form-item">
          <text class="form-label">银行账号</text>
          <input 
            class="form-input"
            type="text"
            placeholder="请输入银行账号"
            value="{{ bankAccount }}"
            bindinput="onBankAccountInput"
          />
        </view>
      </view>
    </view>
  </view>

  <!-- 开票须知 -->
  <view class="invoice-notice">
    <view class="section-title">开票须知</view>
    <view class="notice-list">
      <view class="notice-item">
        <text class="notice-icon">📧</text>
        <text class="notice-text">电子发票将在3-5个工作日内开具并发送至邮箱</text>
      </view>
      <view class="notice-item">
        <text class="notice-icon">💳</text>
        <text class="notice-text">个人发票和企业发票均为电子发票，免费开具</text>
      </view>
      <view class="notice-item">
        <text class="notice-icon">🏢</text>
        <text class="notice-text">企业发票可用于税务抵扣，请确保信息准确</text>
      </view>
      <view class="notice-item">
        <text class="notice-icon">📞</text>
        <text class="notice-text">如有疑问请联系客服：400-123-4567</text>
      </view>
    </view>
  </view>
  </scroll-view>

  <!-- 底部操作 -->
  <view class="bottom-actions">
    <button class="action-button secondary" bindtap="contactService">
      联系客服
    </button>
    <button 
      class="action-button primary" 
      disabled="{{ !canSubmit }}"
      bindtap="submitInvoice"
    >
      提交申请
    </button>
  </view>
</view>