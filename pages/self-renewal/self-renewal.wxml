<!--pages/self-renewal/self-renewal.wxml-->

<!-- 顶部蓝色装饰背景 -->
<view class="blue-header"></view>

<view class="container">
  
  <!-- 骨架屏 - 加载中显示 -->
  <view wx:if="{{loading}}" class="skeleton-wrapper">
    <view class="skeleton-card info-card-skeleton">
      <view class="skeleton-line skeleton-title"></view>
      <view class="skeleton-line skeleton-desc"></view>
    </view>
    <view class="skeleton-card">
      <view class="skeleton-line skeleton-title"></view>
      <view class="skeleton-line skeleton-desc"></view>
    </view>
  </view>

  <!-- 内容区域 - 数据加载完成后显示 -->
  <view wx:else class="fade-in">
    
    <!-- 当前套餐信息卡片 (玻璃态效果) -->
    <view class="card info-card">
      <view class="info-row">
        <view class="info-item">
          <view class="info-label">当前套餐</view>
          <view class="info-value">{{packageInfo.package_name || '未知'}}</view>
        </view>
        <view class="info-item right-align">
          <view class="info-label">到期时间</view>
          <view class="device-tag">
            {{packageInfo.expire_time || '未知'}}
          </view>
        </view>
      </view>
    </view>

    <!-- 续费确认 -->
    <view class="card form-card">
      <view class="form-title">续费确认</view>
      <view class="form-subtitle">续费相同套餐，延长使用期限</view>
    </view>

    <!-- 注意事项 -->
    <view class="notes-section">
      <view class="notes-header">
        <view class="icon-info">!</view>
        <text>续费说明</text>
      </view>
      <view class="notes-list">
        <view class="note-item">续费将在当前套餐到期时间基础上延长，不会浪费剩余时长。</view>
        <view class="note-item">续费成功后立即生效，新的到期时间将自动更新。</view>
        <view class="note-item">如有疑问，请联系客服：4009677726</view>
      </view>
    </view>

  </view>

</view>

<!-- 底部固定按钮 -->
<view class="footer-action safe-area-bottom">
  <button 
    class="btn-submit" 
    hover-class="btn-hover" 
    bindtap="submitRenew"
    disabled="{{!packageInfo || loading || submitLoading}}"
    loading="{{submitLoading}}"
  >
    <text wx:if="{{submitLoading}}">提交中...</text>
    <text wx:elif="{{loading}}">加载中...</text>
    <text wx:elif="{{!packageInfo}}">套餐信息加载失败</text>
    <text wx:else>确认续费</text>
  </button>
</view>