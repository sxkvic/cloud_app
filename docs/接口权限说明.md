# æ¥å£æƒé™é…ç½®è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å°ç¨‹åºæ¥å£å¯¹æ¥è¿‡ç¨‹ä¸­å‘ç°çš„æƒé™é…ç½®é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚

---

## âš ï¸ å‘ç°çš„é—®é¢˜

### 1. Banneræ¥å£æƒé™é—®é¢˜

**æ¥å£**: `/api/v1/tools/getBannersList`  
**å½“å‰é…ç½®**: éœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆAuthorization: Bearer tokenï¼‰  
**é—®é¢˜**: å°ç¨‹åºç«¯æ™®é€šç”¨æˆ·éœ€è¦æŸ¥çœ‹é¦–é¡µBannerè½®æ’­å›¾ï¼Œä½†æ— ç®¡ç†å‘˜æƒé™

---

## ğŸ”§ å½“å‰è§£å†³æ–¹æ¡ˆ

### å°ç¨‹åºç«¯é…ç½®

åœ¨ `utils/api.js` ä¸­ï¼Œæˆ‘ä»¬å°† `getBannersList` è®¾ç½®ä¸º `needAuth: true`ï¼Œè¿™æ ·ï¼š

1. âœ… ç”¨æˆ·ç™»å½•åä¼šè‡ªåŠ¨å‘é€token
2. âœ… å¦‚æœåç«¯å…è®¸æ™®é€šç”¨æˆ·è®¿é—®ï¼Œå¯ä»¥æ­£å¸¸è·å–æ•°æ®
3. âœ… å¦‚æœåç«¯æ‹’ç»ï¼Œä¼šè§¦å‘é™çº§æ–¹æ¡ˆï¼ˆæ˜¾ç¤ºé»˜è®¤Bannerï¼‰

```javascript
// utils/api.js
getBannersList(params = {}) {
  return request({
    url: '/api/v1/tools/getBannersList',
    method: 'GET',
    data: params,
    needAuth: true  // å‘é€ç”¨æˆ·token
  });
}
```

### é™çº§å¤„ç†

åœ¨ `pages/home/home.js` ä¸­ï¼Œå¦‚æœAPIè°ƒç”¨å¤±è´¥ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤Bannerï¼š

```javascript
// pages/home/home.js
loadDefaultBanners() {
  this.setData({
    slides: [
      {
        image: 'https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=800&q=80',
        title: 'å®¶åº­å½±é™¢çº§ä½“éªŒ',
        subtitle: 'è¶…é«˜æ¸…è§†é¢‘æµç•…æ’­æ”¾ï¼Œæ— å¡é¡¿'
      },
      {
        image: 'https://images.unsplash.com/photo-1587145820266-a5951ee6f620?w=800&q=80',
        title: 'æé€Ÿå…‰çº¤ï¼Œä¸€é”®åˆ°å®¶',
        subtitle: 'å…¨æ–°åƒå…†å¥—é¤ï¼Œç•…äº«æ•°å­—ç”Ÿæ´»'
      }
    ]
  });
}
```

---

## ğŸ’¡ å»ºè®®çš„åç«¯è°ƒæ•´ï¼ˆæ¨èï¼‰

### æ–¹æ¡ˆ1ï¼šä¿®æ”¹ç°æœ‰æ¥å£æƒé™ï¼ˆæ¨èï¼‰

ä¿®æ”¹ `/api/v1/tools/getBannersList` æ¥å£ï¼Œå…è®¸æ™®é€šç”¨æˆ·è®¿é—®ï¼š

```javascript
// åç«¯ä»£ç ç¤ºä¾‹
router.get('/api/v1/tools/getBannersList', 
  authenticateToken,  // éªŒè¯tokenï¼ˆå¯é€‰ï¼‰
  async (req, res) => {
    // ä¸æ£€æŸ¥ç®¡ç†å‘˜æƒé™ï¼Œå…è®¸æ‰€æœ‰ç™»å½•ç”¨æˆ·è®¿é—®
    // æˆ–è€…å®Œå…¨ä¸éœ€è¦è®¤è¯ï¼Œæ”¹ä¸ºå…¬å¼€æ¥å£
    const banners = await Banner.find({ status: 'active' });
    res.json({ success: true, data: { banners } });
  }
);
```

### æ–¹æ¡ˆ2ï¼šåˆ›å»ºæ–°çš„å…¬å¼€æ¥å£

åˆ›å»ºä¸€ä¸ªä¸“é—¨ç»™å°ç¨‹åºä½¿ç”¨çš„å…¬å¼€Banneræ¥å£ï¼š

```javascript
// æ–°å¢å…¬å¼€æ¥å£
router.get('/api/v1/wx/getActiveBanners', async (req, res) => {
  // ä¸éœ€è¦è®¤è¯ï¼Œç›´æ¥è¿”å›æ¿€æ´»çŠ¶æ€çš„Banner
  const banners = await Banner.find({ status: 'active' });
  res.json({ success: true, data: { banners } });
});
```

ç„¶ååœ¨å°ç¨‹åº `utils/api.js` ä¸­ä¿®æ”¹ï¼š

```javascript
getBannersList(params = {}) {
  return request({
    url: '/api/v1/wx/getActiveBanners',  // ä½¿ç”¨æ–°æ¥å£
    method: 'GET',
    data: params,
    needAuth: false  // ä¸éœ€è¦è®¤è¯
  });
}
```

---

## ğŸ“Š æ¥å£æƒé™æ€»ç»“

| æ¥å£ | å½“å‰æƒé™è¦æ±‚ | å°ç¨‹åºéœ€æ±‚ | å»ºè®®è°ƒæ•´ |
|------|------------|----------|---------|
| `/api/v1/tools/getBannersList` | ç®¡ç†å‘˜ | æ™®é€šç”¨æˆ· | âš ï¸ æ”¹ä¸ºå…¬å¼€æˆ–å…è®¸æ™®é€šç”¨æˆ· |
| `/api/v1/tools/getArticlesList` | æ— éœ€è®¤è¯ | æ™®é€šç”¨æˆ· | âœ… æ— éœ€è°ƒæ•´ |
| `/api/v1/tools/getArticleDetail/:id` | æ— éœ€è®¤è¯ | æ™®é€šç”¨æˆ· | âœ… æ— éœ€è°ƒæ•´ |

---

## ğŸ¯ æ¨èæ–¹æ¡ˆ

**æœ€ä½³å®è·µ**ï¼šé‡‡ç”¨ **æ–¹æ¡ˆ2**ï¼Œåˆ›å»ºä¸“é—¨çš„å°ç¨‹åºæ¥å£

**ä¼˜ç‚¹**ï¼š
1. âœ… ä¸å½±å“ç°æœ‰ç®¡ç†åå°æ¥å£
2. âœ… æƒé™æ§åˆ¶æ›´æ¸…æ™°
3. âœ… å¯ä»¥é’ˆå¯¹å°ç¨‹åºä¼˜åŒ–è¿”å›æ•°æ®
4. âœ… ä¾¿äºåç»­ç»´æŠ¤å’Œæ‰©å±•

**å®æ–½æ­¥éª¤**ï¼š
1. åç«¯åˆ›å»º `/api/v1/wx/getActiveBanners` æ¥å£
2. å°ç¨‹åºä¿®æ”¹ `utils/api.js` ä¸­çš„ `getBannersList` æ–¹æ³•
3. æµ‹è¯•éªŒè¯

---

## ğŸ“ å…¶ä»–éœ€è¦æ³¨æ„çš„æ¥å£

ä»¥ä¸‹æ¥å£ä¹Ÿå¯èƒ½éœ€è¦ç±»ä¼¼çš„è°ƒæ•´ï¼š

- `/api/v1/tools/getOperatorsList` - è·å–è¿è¥å•†åˆ—è¡¨ï¼ˆå·¥å…·ç±»ï¼Œå»ºè®®å…¬å¼€ï¼‰
- `/api/v1/tools/provinces` - è·å–çœä»½åˆ—è¡¨ï¼ˆå·¥å…·ç±»ï¼Œå»ºè®®å…¬å¼€ï¼‰
- `/api/v1/tools/cities/:id` - è·å–åŸå¸‚åˆ—è¡¨ï¼ˆå·¥å…·ç±»ï¼Œå»ºè®®å…¬å¼€ï¼‰

---

## âœ… å½“å‰çŠ¶æ€

- âœ… å°ç¨‹åºç«¯å·²é…ç½®é™çº§å¤„ç†
- âœ… æ¨æ–‡æ¥å£æ­£å¸¸å·¥ä½œï¼ˆå…¬å¼€æ¥å£ï¼‰
- âš ï¸ Banneræ¥å£ç­‰å¾…åç«¯è°ƒæ•´
- âœ… å…¶ä»–ä¸šåŠ¡æ¥å£ï¼ˆç™»å½•ã€è®¾å¤‡ç»‘å®šã€å¥—é¤ã€è´¦å•ç­‰ï¼‰æ­£å¸¸å·¥ä½œ

---

**æ›´æ–°æ—¶é—´**: 2024-01-01  
**ç»´æŠ¤äººå‘˜**: å¼€å‘å›¢é˜Ÿ

