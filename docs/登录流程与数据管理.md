# ç™»å½•æµç¨‹ä¸æ•°æ®ç®¡ç†

## æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç™»å½•æµç¨‹                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  å¾®ä¿¡æˆæƒç™»å½•    â”‚
                    â”‚  è·å– openid     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ç”Ÿæˆ/è·å– token â”‚
                    â”‚  è·å–ç”¨æˆ·ä¿¡æ¯    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ getUserDevices   â”‚ â† æ£€æŸ¥è®¾å¤‡ç»‘å®š
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
                â–¼                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  æœ‰ç»‘å®šè®¾å¤‡   â”‚          â”‚  æ— ç»‘å®šè®¾å¤‡   â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
                â–¼                           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ DataManager          â”‚      â”‚ è·³è½¬è®¾å¤‡ç»‘å®š  â”‚
    â”‚ .getCompleteCustomerInfo() â”‚      â”‚    é¡µé¢      â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. è°ƒç”¨æ—§æ¥å£         â”‚
    â”‚ getCustomerByDeviceCodeâ”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. æå– recharge_accountâ”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. è°ƒç”¨æ–°æ¥å£         â”‚
    â”‚ getCustomerAndPackageByDeviceNoâ”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. åˆå¹¶æ•°æ®å¹¶ç¼“å­˜     â”‚
    â”‚ - customer_info      â”‚
    â”‚ - binding_info       â”‚
    â”‚ - device_info        â”‚
    â”‚ - complete_customer_infoâ”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è·³è½¬åˆ°é¦–é¡µ            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ å„ä¸ªé¡µé¢ä½¿ç”¨ç¼“å­˜æ•°æ®  â”‚
    â”‚ - é¢„å……å€¼              â”‚
    â”‚ - å¥—é¤è®¢è´­            â”‚
    â”‚ - è‡ªåŠ©ç»­è´¹            â”‚
    â”‚ - æˆ‘çš„è´¦å•            â”‚
    â”‚ - ç­‰ç­‰...            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒåŸåˆ™

### âœ… æ­£ç¡®çš„åšæ³•

1. **åœ¨ç™»å½•æ—¶è·å–å®Œæ•´æ•°æ®**
   - ç™»å½•æˆåŠŸåï¼Œè°ƒç”¨ `DataManager.getCompleteCustomerInfo()`
   - ä¸€æ¬¡æ€§è·å–æ‰€æœ‰éœ€è¦çš„æ•°æ®
   - å­˜å‚¨åˆ°ç¼“å­˜ä¾›å„ä¸ªé¡µé¢ä½¿ç”¨

2. **ä¸šåŠ¡é¡µé¢ä½¿ç”¨ç¼“å­˜æ•°æ®**
   - ä¼˜å…ˆä»ç¼“å­˜è¯»å– `complete_customer_info`
   - åªæœ‰ç¼“å­˜ä¸å­˜åœ¨æ—¶æ‰é‡æ–°è·å–
   - å‡å°‘ä¸å¿…è¦çš„ API è°ƒç”¨

3. **éœ€è¦æœ€æ–°æ•°æ®æ—¶æ‰åˆ·æ–°**
   - ç”¨æˆ·ä¸»åŠ¨åˆ·æ–°æ“ä½œ
   - å…³é”®ä¸šåŠ¡æ“ä½œå‰ï¼ˆå¦‚æ”¯ä»˜ï¼‰
   - æ•°æ®å¯èƒ½è¿‡æœŸçš„åœºæ™¯

### âŒ é”™è¯¯çš„åšæ³•

1. **æ¯ä¸ªé¡µé¢éƒ½è°ƒç”¨æ¥å£**
   ```javascript
   // âŒ ä¸æ¨è - æ¯ä¸ªé¡µé¢éƒ½è°ƒç”¨
   onShow() {
     this.loadCustomerInfo(); // é¢‘ç¹è°ƒç”¨æ¥å£
   }
   ```

2. **ä¸ä½¿ç”¨ç¼“å­˜**
   ```javascript
   // âŒ ä¸æ¨è - å¿½ç•¥ç¼“å­˜
   const result = await API.getCustomerByDeviceCode(deviceCode);
   ```

3. **ç¼“å­˜ç®¡ç†æ··ä¹±**
   ```javascript
   // âŒ ä¸æ¨è - æ‰‹åŠ¨ç®¡ç†ç¼“å­˜
   wx.setStorageSync('customer_info', data);
   wx.setStorageSync('device_info', data);
   // å®¹æ˜“é—æ¼æˆ–ä¸ä¸€è‡´
   ```

## è¯¦ç»†æµç¨‹

### 1. ç™»å½•æµç¨‹ (login.js)

```javascript
// pages/login/login.js
const DataManager = require('../../utils/dataManager');

async checkDeviceBindingAndNavigate() {
  try {
    // 1. è·å–ç”¨æˆ·ç»‘å®šçš„è®¾å¤‡åˆ—è¡¨
    const devicesResult = await API.getUserDevices();
    const devices = devicesResult.data.devices || [];
    
    if (devices.length > 0) {
      const firstDevice = devices[0];
      const deviceCode = firstDevice.deviceCode || firstDevice.device_no;
      
      // 2. ä½¿ç”¨ DataManager è·å–å®Œæ•´ä¿¡æ¯
      const completeInfoResult = await DataManager.getCompleteCustomerInfo(
        deviceCode, 
        true  // å¼ºåˆ¶åˆ·æ–°
      );
      
      if (completeInfoResult.success && completeInfoResult.data) {
        const completeData = completeInfoResult.data;
        
        // 3. å­˜å‚¨å®Œæ•´æ•°æ®åˆ°ç¼“å­˜
        wx.setStorageSync('deviceBound', true);
        wx.setStorageSync('device_no', completeData.device_info?.device_no);
        wx.setStorageSync('complete_customer_info', completeData);
        wx.setStorageSync('customer_info', completeData.customer);
        wx.setStorageSync('binding_info', completeData.binding_info);
        wx.setStorageSync('device_info', completeData.device_info);
        
        // 4. åŒæ­¥åˆ°å…¨å±€æ•°æ®
        app.globalData.deviceBound = true;
        app.globalData.device_no = completeData.device_info?.device_no;
        app.globalData.complete_customer_info = completeData;
        
        console.log('âœ… å®Œæ•´å®¢æˆ·ä¿¡æ¯å·²å­˜å‚¨');
      }
      
      // 5. è·³è½¬åˆ°é¦–é¡µ
      navigation.switchTab('/pages/home/home');
    } else {
      // 6. æœªç»‘å®šè®¾å¤‡ï¼Œè·³è½¬ç»‘å®šé¡µé¢
      navigation.navigateTo('/pages/bind-device-code/bind-device-code');
    }
  } catch (error) {
    console.error('âŒ æ£€æŸ¥è®¾å¤‡ç»‘å®šå¤±è´¥:', error);
  }
}
```

### 2. ä¸šåŠ¡é¡µé¢ä½¿ç”¨ç¼“å­˜ (æ¨èæ¨¡å¼)

```javascript
// pages/pre-recharge/pre-recharge.js
const DataManager = require('../../utils/dataManager');

Page({
  data: {
    deviceCode: "",
    customerInfo: null,
    isLoadingCustomer: false
  },

  onLoad() {
    const device_no = wx.getStorageSync("device_no");
    this.setData({ deviceCode: device_no });
    
    // é¦–æ¬¡åŠ è½½
    this.loadCustomerInfo();
  },

  onShow() {
    // ä¸éœ€è¦æ¯æ¬¡éƒ½é‡æ–°åŠ è½½
    // ä½¿ç”¨ç™»å½•æ—¶ç¼“å­˜çš„æ•°æ®å³å¯
  },

  async loadCustomerInfo() {
    try {
      this.setData({ isLoadingCustomer: true });
      
      // ä¼˜å…ˆä»ç¼“å­˜è·å–
      let customerInfo = wx.getStorageSync('complete_customer_info');
      
      if (!customerInfo) {
        // ç¼“å­˜ä¸å­˜åœ¨ï¼Œé‡æ–°è·å–
        console.log("âš ï¸ ç¼“å­˜ä¸å­˜åœ¨ï¼Œé‡æ–°è·å–...");
        const result = await DataManager.getCompleteCustomerInfo(
          this.data.deviceCode, 
          true
        );
        customerInfo = result.data;
      } else {
        console.log("âœ… ä½¿ç”¨ç¼“å­˜çš„å®¢æˆ·ä¿¡æ¯");
      }
      
      this.setData({
        customerInfo: customerInfo,
        isLoadingCustomer: false
      });
    } catch (error) {
      console.error("âŒ åŠ è½½å¤±è´¥:", error);
      this.setData({ isLoadingCustomer: false });
    }
  },

  // å¦‚æœéœ€è¦åˆ·æ–°æœ€æ–°æ•°æ®ï¼ˆå¯é€‰ï¼‰
  async refreshData() {
    try {
      wx.showLoading({ title: 'åˆ·æ–°ä¸­...' });
      
      const result = await DataManager.getCompleteCustomerInfo(
        this.data.deviceCode,
        true  // å¼ºåˆ¶åˆ·æ–°
      );
      
      this.setData({
        customerInfo: result.data
      });
      
      wx.hideLoading();
      wx.showToast({ title: 'åˆ·æ–°æˆåŠŸ', icon: 'success' });
    } catch (error) {
      wx.hideLoading();
      wx.showToast({ title: 'åˆ·æ–°å¤±è´¥', icon: 'none' });
    }
  }
});
```

### 3. éœ€è¦æœ€æ–°æ•°æ®çš„åœºæ™¯

æŸäº›åœºæ™¯éœ€è¦ç¡®ä¿æ•°æ®æ˜¯æœ€æ–°çš„ï¼š

```javascript
// æ”¯ä»˜å‰ç¡®è®¤
async confirmPayment() {
  try {
    // æ”¯ä»˜å‰è·å–æœ€æ–°æ•°æ®
    const result = await DataManager.getCompleteCustomerInfo(
      this.data.deviceCode,
      true  // å¼ºåˆ¶åˆ·æ–°
    );
    
    // ä½¿ç”¨æœ€æ–°æ•°æ®è¿›è¡Œæ”¯ä»˜
    const balance = result.data.balance_info?.available_balance || 0;
    
    if (balance < this.data.payAmount) {
      wx.showToast({ title: 'ä½™é¢ä¸è¶³', icon: 'none' });
      return;
    }
    
    // ç»§ç»­æ”¯ä»˜æµç¨‹...
  } catch (error) {
    console.error('è·å–æœ€æ–°æ•°æ®å¤±è´¥:', error);
  }
}
```

## API è°ƒç”¨æµç¨‹

### DataManager.getCompleteCustomerInfo() å†…éƒ¨æµç¨‹

```javascript
async getCompleteCustomerInfo(deviceCode, forceRefresh = true) {
  // 1. å¼ºåˆ¶åˆ·æ–°æ—¶æ¸…é™¤ç¼“å­˜
  if (forceRefresh) {
    clearCustomerCache();
  }
  
  // 2. è°ƒç”¨æ—§æ¥å£è·å–åŸºæœ¬ä¿¡æ¯
  const basicResult = await API.getCustomerByDeviceCode(deviceCode);
  
  // 3. æå– recharge_account
  const rechargeAccount = basicResult.data.binding_info?.recharge_account;
  
  if (!rechargeAccount) {
    // æ²¡æœ‰ recharge_accountï¼Œè¿”å›åŸºæœ¬ä¿¡æ¯
    return basicResult;
  }
  
  // 4. è°ƒç”¨æ–°æ¥å£è·å–å®Œæ•´ä¿¡æ¯
  const completeResult = await API.getCustomerAndPackageByDeviceNo(
    deviceCode,
    rechargeAccount
  );
  
  // 5. åˆå¹¶æ•°æ®
  const mergedData = {
    ...basicResult.data,      // åŸºæœ¬ä¿¡æ¯
    ...completeResult.data,   // å®Œæ•´ä¿¡æ¯ï¼ˆä¼˜å…ˆï¼‰
    _basic: basicResult.data  // å¤‡ä»½
  };
  
  // 6. ä¿å­˜åˆ°ç¼“å­˜
  saveCustomerInfoToCache(mergedData);
  
  return {
    success: true,
    data: mergedData
  };
}
```

## æ•°æ®ç»“æ„

### å®Œæ•´çš„å®¢æˆ·ä¿¡æ¯ (complete_customer_info)

```javascript
{
  // åŸºæœ¬ä¿¡æ¯ï¼ˆæ—§æ¥å£ï¼‰
  customer: {
    id: 123,
    customer_name: "å¼ ä¸‰",
    phone: "18795487757"
  },
  
  binding_info: {
    id: 456,
    recharge_account: "18795487757",  // â­ï¸ å…³é”®å­—æ®µ
    current_package_name: "100MåŒ…æœˆå¥—é¤",
    expire_date: "2025-12-31"
  },
  
  device_info: {
    id: 789,
    device_no: "DEV9874587563",
    device_name: "5Gæµ‹è¯•è®¾å¤‡"
  },
  
  // æ‰©å±•ä¿¡æ¯ï¼ˆæ–°æ¥å£ï¼‰
  package_info: {
    package_id: 101,
    package_name: "100MåŒ…æœˆå¥—é¤",
    package_price: 99.00,
    package_speed: "100M"
  },
  
  balance_info: {
    balance: 150.50,
    frozen_balance: 0,
    available_balance: 150.50
  },
  
  usage_info: {
    used_data: 50.5,
    total_data: 100,
    usage_percent: 50.5
  },
  
  // å¤‡ä»½æ•°æ®
  _basic: {
    customer: { ... },
    binding_info: { ... },
    device_info: { ... }
  }
}
```

## ç¼“å­˜ç®¡ç†

### ç™»å½•æ—¶è®¾ç½®çš„ç¼“å­˜

```javascript
// ç™»å½•æˆåŠŸåè®¾ç½®
wx.setStorageSync('deviceBound', true);
wx.setStorageSync('device_no', 'DEV9874587563');
wx.setStorageSync('complete_customer_info', completeData);  // â­ï¸ å®Œæ•´æ•°æ®
wx.setStorageSync('customer_info', completeData.customer);
wx.setStorageSync('binding_info', completeData.binding_info);
wx.setStorageSync('device_info', completeData.device_info);
```

### ä¸šåŠ¡é¡µé¢è¯»å–ç¼“å­˜

```javascript
// ä¼˜å…ˆè¯»å–å®Œæ•´æ•°æ®
const completeInfo = wx.getStorageSync('complete_customer_info');

// æˆ–è€…è¯»å–å•ç‹¬å­—æ®µï¼ˆå…¼å®¹æ—§ä»£ç ï¼‰
const customerInfo = wx.getStorageSync('customer_info');
const bindingInfo = wx.getStorageSync('binding_info');
const deviceInfo = wx.getStorageSync('device_info');
```

### æ¸…é™¤ç¼“å­˜

```javascript
// é€€å‡ºç™»å½•æ—¶æ¸…é™¤
DataManager.clearCustomerCache();

// æˆ–æ‰‹åŠ¨æ¸…é™¤
wx.removeStorageSync('complete_customer_info');
wx.removeStorageSync('customer_info');
wx.removeStorageSync('binding_info');
wx.removeStorageSync('device_info');
```

## ä½•æ—¶åˆ·æ–°æ•°æ®

### âœ… éœ€è¦åˆ·æ–°çš„åœºæ™¯

1. **ç”¨æˆ·ç™»å½•æ—¶** - å¿…é¡»åˆ·æ–°
2. **ç”¨æˆ·ä¸»åŠ¨åˆ·æ–°** - ä¸‹æ‹‰åˆ·æ–°ç­‰
3. **æ”¯ä»˜å‰ç¡®è®¤** - ç¡®ä¿ä½™é¢æœ€æ–°
4. **å¥—é¤å˜æ›´å** - ç¡®ä¿å¥—é¤ä¿¡æ¯æœ€æ–°
5. **ç¼“å­˜ä¸å­˜åœ¨æ—¶** - é™çº§å¤„ç†

### âŒ ä¸éœ€è¦åˆ·æ–°çš„åœºæ™¯

1. **é¡µé¢åˆ‡æ¢** - ä½¿ç”¨ç¼“å­˜å³å¯
2. **æ™®é€šæµè§ˆ** - ä½¿ç”¨ç¼“å­˜å³å¯
3. **æŸ¥çœ‹å†å²æ•°æ®** - ä½¿ç”¨ç¼“å­˜å³å¯

## é”™è¯¯å¤„ç†

### é™çº§ç­–ç•¥

```javascript
try {
  // å°è¯•è·å–å®Œæ•´ä¿¡æ¯
  const result = await DataManager.getCompleteCustomerInfo(deviceCode, true);
  
  if (result.success && result.data) {
    // ä½¿ç”¨å®Œæ•´æ•°æ®
    this.setData({ customerInfo: result.data });
  }
} catch (error) {
  console.error('è·å–å®Œæ•´ä¿¡æ¯å¤±è´¥:', error);
  
  // é™çº§ï¼šä½¿ç”¨ç¼“å­˜æ•°æ®
  const cachedInfo = wx.getStorageSync('complete_customer_info');
  if (cachedInfo) {
    console.log('ä½¿ç”¨ç¼“å­˜æ•°æ®');
    this.setData({ customerInfo: cachedInfo });
  } else {
    // ç¼“å­˜ä¹Ÿä¸å­˜åœ¨ï¼Œæç¤ºç”¨æˆ·é‡æ–°ç™»å½•
    wx.showModal({
      title: 'æç¤º',
      content: 'æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•',
      success: (res) => {
        if (res.confirm) {
          navigation.navigateTo('/pages/login/login');
        }
      }
    });
  }
}
```

## è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹å®Œæ•´æµç¨‹æ—¥å¿—

```
ç™»å½•æµç¨‹:
ğŸ” æ£€æŸ¥ç”¨æˆ·è®¾å¤‡ç»‘å®šçŠ¶æ€...
ğŸ“‹ æœåŠ¡å™¨è¿”å›çš„è®¾å¤‡åˆ—è¡¨: [...]
ğŸ“¦ ä» getUserDevices è·å–åˆ°çš„è®¾å¤‡æ•°æ®: {...}
ğŸ” ä½¿ç”¨ DataManager è·å–å®Œæ•´å®¢æˆ·ä¿¡æ¯...
ğŸ“ è°ƒç”¨æ—§æ¥å£è·å–åŸºæœ¬ä¿¡æ¯...
ğŸ“ è°ƒç”¨æ–°æ¥å£è·å–å®Œæ•´ä¿¡æ¯... { deviceCode: "DEV...", rechargeAccount: "187..." }
âœ… æ–°æ¥å£è¿”å›å®Œæ•´æ•°æ®
ğŸ’¾ ä¿å­˜å®¢æˆ·ä¿¡æ¯åˆ°ç¼“å­˜...
âœ… å®Œæ•´å®¢æˆ·ä¿¡æ¯å·²å­˜å‚¨ï¼ˆåŒ…å«æ–°æ¥å£æ•°æ®ï¼‰

ä¸šåŠ¡é¡µé¢:
ğŸ“¦ åŠ è½½å®¢æˆ·ä¿¡æ¯ï¼Œè®¾å¤‡ç : DEV...
âœ… ä½¿ç”¨ç¼“å­˜çš„å®¢æˆ·ä¿¡æ¯
å®¢æˆ·ï¼šå¼ ä¸‰, è®¾å¤‡ï¼š5Gæµ‹è¯•è®¾å¤‡
```

### éªŒè¯æ•°æ®å®Œæ•´æ€§

```javascript
// åœ¨æ§åˆ¶å°æ£€æŸ¥
const completeInfo = wx.getStorageSync('complete_customer_info');
console.log('å®Œæ•´æ•°æ®:', completeInfo);
console.log('æ˜¯å¦æœ‰å¥—é¤ä¿¡æ¯:', !!completeInfo.package_info);
console.log('æ˜¯å¦æœ‰ä½™é¢ä¿¡æ¯:', !!completeInfo.balance_info);
console.log('æ˜¯å¦æœ‰ä½¿ç”¨æƒ…å†µ:', !!completeInfo.usage_info);
```

## æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. âœ… **ç™»å½•æ—¶è·å–å®Œæ•´æ•°æ®** - ä¸€æ¬¡æ€§è·å–æ‰€æœ‰ä¿¡æ¯
2. âœ… **ä¸šåŠ¡é¡µé¢ä½¿ç”¨ç¼“å­˜** - å‡å°‘ä¸å¿…è¦çš„ API è°ƒç”¨
3. âœ… **å…³é”®æ“ä½œå‰åˆ·æ–°** - ç¡®ä¿æ•°æ®æœ€æ–°
4. âœ… **ç»Ÿä¸€ä½¿ç”¨ DataManager** - ç®€åŒ–æ•°æ®ç®¡ç†
5. âœ… **å®Œå–„çš„é™çº§ç­–ç•¥** - ç¡®ä¿ç³»ç»Ÿç¨³å®š

### æ•°æ®æµå‘

```
ç™»å½• â†’ DataManager â†’ ç¼“å­˜ â†’ ä¸šåŠ¡é¡µé¢
  â†“         â†“          â†“         â†“
è·å–    ç»„åˆè°ƒç”¨    å­˜å‚¨    è¯»å–ä½¿ç”¨
openid  æ—§+æ–°æ¥å£   å®Œæ•´æ•°æ®  ç¼“å­˜æ•°æ®
```

è¿™æ ·çš„æ¶æ„ç¡®ä¿äº†ï¼š
- ğŸš€ **æ€§èƒ½ä¼˜åŒ–** - å‡å°‘é‡å¤ API è°ƒç”¨
- ğŸ“Š **æ•°æ®å®Œæ•´** - æ–°æ¥å£æä¾›æ›´å¤šå­—æ®µ
- ğŸ”„ **çµæ´»åˆ·æ–°** - éœ€è¦æ—¶å¯ä»¥è·å–æœ€æ–°æ•°æ®
- ğŸ›¡ï¸ **ç¨³å®šå¯é ** - å®Œå–„çš„é™çº§å’Œé”™è¯¯å¤„ç†

å®Œç¾ï¼ğŸ‰
