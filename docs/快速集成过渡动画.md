# å¿«é€Ÿé›†æˆè¿‡æ¸¡åŠ¨ç”»åˆ°ç°æœ‰é¡µé¢

## ä¸€é”®é›†æˆæ­¥éª¤

### æ­¥éª¤ 1ï¼šä¿®æ”¹é¡µé¢ JSON æ–‡ä»¶

åœ¨éœ€è¦æ·»åŠ è¿‡æ¸¡åŠ¨ç”»çš„é¡µé¢çš„ `.json` æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ç»„ä»¶å¼•ç”¨ï¼š

```json
{
  "usingComponents": {
    "page-transition": "/components/page-transition/page-transition"
  }
}
```

### æ­¥éª¤ 2ï¼šä¿®æ”¹é¡µé¢ WXML æ–‡ä»¶

åœ¨é¡µé¢çš„ `.wxml` æ–‡ä»¶**æœ€å**æ·»åŠ ç»„ä»¶ï¼š

```xml
<!-- é¡µé¢è¿‡æ¸¡åŠ¨ç”» -->
<page-transition id="pageTransition"></page-transition>
```

### æ­¥éª¤ 3ï¼šä¿®æ”¹é¡µé¢ JS æ–‡ä»¶

å°†åŸæœ‰çš„è·³è½¬ä»£ç æ›¿æ¢ä¸ºå¸¦åŠ¨ç”»çš„è·³è½¬ï¼š

**åŸä»£ç ï¼š**
```javascript
// æ™®é€šè·³è½¬
wx.navigateTo({
  url: '/pages/detail/detail'
});

// æˆ–è€…ä½¿ç”¨å·¥å…·å‡½æ•°
navigation.navigateTo('/pages/detail/detail');
```

**æ–°ä»£ç ï¼š**
```javascript
// å¸¦åŠ¨ç”»çš„è·³è½¬
navigation.navigateWithTransition('/pages/detail/detail', {
  text: 'åŠ è½½ä¸­...'
});
```

## æ‰¹é‡æ›¿æ¢ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šäº§å“æŸ¥è¯¢é¡µé¢

**pages/product-query/product-query.json**
```json
{
  "navigationBarTitleText": "äº§å“æŸ¥è¯¢",
  "usingComponents": {
    "page-transition": "/components/page-transition/page-transition"
  }
}
```

**pages/product-query/product-query.wxml** (åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ )
```xml
<page-transition id="pageTransition"></page-transition>
```

**pages/product-query/product-query.js**
```javascript
// æŸ¥è¯¢æˆåŠŸåè·³è½¬
onQuerySuccess() {
  navigation.navigateWithTransition('/pages/product-detail/product-detail', {
    text: 'æ­£åœ¨åŠ è½½äº§å“è¯¦æƒ…...'
  });
}
```

### ç¤ºä¾‹ 2ï¼šå¥—é¤è®¢è´­é¡µé¢

**pages/package-order/package-order.json**
```json
{
  "navigationBarTitleText": "å¥—é¤è®¢è´­",
  "usingComponents": {
    "page-transition": "/components/page-transition/page-transition"
  }
}
```

**pages/package-order/package-order.wxml** (åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ )
```xml
<page-transition id="pageTransition"></page-transition>
```

**pages/package-order/package-order.js**
```javascript
// è®¢è´­æˆåŠŸåè·³è½¬
async onOrderSuccess() {
  const transition = this.selectComponent('#pageTransition');
  transition.showLoading('è®¢å•å¤„ç†ä¸­...');
  
  try {
    await API.createOrder(this.data.orderData);
    
    wx.redirectTo({
      url: '/pages/order-result/order-result?status=success',
      success: () => {
        setTimeout(() => {
          transition.hideLoading();
        }, 300);
      }
    });
  } catch (error) {
    transition.hideLoading();
    wx.showToast({ title: 'è®¢è´­å¤±è´¥', icon: 'none' });
  }
}
```

## éœ€è¦é›†æˆçš„é¡µé¢æ¸…å•

ä»¥ä¸‹æ˜¯é¡¹ç›®ä¸­æ‰€æœ‰éœ€è¦æ·»åŠ è¿‡æ¸¡åŠ¨ç”»çš„é¡µé¢ï¼š

### âœ… å·²é›†æˆ
- [x] pages/home/home

### ğŸ“‹ å¾…é›†æˆ
- [ ] pages/my/my
- [ ] pages/product-query/product-query
- [ ] pages/pre-recharge/pre-recharge
- [ ] pages/change-transfer/change-transfer
- [ ] pages/self-renewal/self-renewal
- [ ] pages/package-order/package-order
- [ ] pages/business-application/business-application
- [ ] pages/complaint/complaint
- [ ] pages/invoice/invoice
- [ ] pages/electronic-agreement/electronic-agreement
- [ ] pages/payment-collection/payment-collection
- [ ] pages/business-cancellation/business-cancellation
- [ ] pages/service-evaluation/service-evaluation
- [ ] pages/bind-device-code/bind-device-code
- [ ] pages/login/login

## æ³¨æ„äº‹é¡¹

### 1. ç™»å½•é¡µé¢ç‰¹æ®Šå¤„ç†

ç™»å½•é¡µé¢è·³è½¬åˆ°é¦–é¡µæ—¶ï¼Œå»ºè®®ä½¿ç”¨è¿‡æ¸¡åŠ¨ç”»ï¼š

```javascript
// pages/login/login.js
async onWeChatLogin() {
  // ... ç™»å½•é€»è¾‘ ...
  
  // æ˜¾ç¤ºè¿‡æ¸¡åŠ¨ç”»
  const transition = this.selectComponent('#pageTransition');
  transition.showLoading('ç™»å½•æˆåŠŸï¼Œæ­£åœ¨è¿›å…¥...');
  
  setTimeout(() => {
    wx.redirectTo({
      url: '/pages/home/home',
      success: () => {
        // è·³è½¬æˆåŠŸåä¼šè‡ªåŠ¨éšè—
      }
    });
  }, 500);
}
```

### 2. è®¾å¤‡ç»‘å®šé¡µé¢

ç»‘å®šæˆåŠŸåè·³è½¬åˆ°é¦–é¡µï¼š

```javascript
// pages/bind-device-code/bind-device-code.js
async onBindSuccess() {
  const transition = this.selectComponent('#pageTransition');
  transition.showLoading('ç»‘å®šæˆåŠŸï¼Œæ­£åœ¨è¿›å…¥é¦–é¡µ...');
  
  setTimeout(() => {
    wx.redirectTo({
      url: '/pages/home/home'
    });
  }, 800);
}
```

### 3. è¡¨å•æäº¤é¡µé¢

æäº¤è¡¨å•åè·³è½¬åˆ°ç»“æœé¡µï¼š

```javascript
async onSubmit() {
  const transition = this.selectComponent('#pageTransition');
  transition.showLoading('æäº¤ä¸­...');
  
  try {
    await API.submitForm(this.data.formData);
    
    wx.redirectTo({
      url: '/pages/result/result?status=success',
      success: () => {
        setTimeout(() => {
          transition.hideLoading();
        }, 300);
      }
    });
  } catch (error) {
    transition.hideLoading();
    wx.showToast({ title: 'æäº¤å¤±è´¥', icon: 'none' });
  }
}
```

## è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³æ‰¹é‡æ·»åŠ è¿‡æ¸¡åŠ¨ç”»åˆ°æ‰€æœ‰é¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ï¼š

```bash
# å¾…å¼€å‘ï¼šæ‰¹é‡æ·»åŠ è„šæœ¬
# åŠŸèƒ½ï¼šè‡ªåŠ¨åœ¨æ‰€æœ‰é¡µé¢çš„ JSONã€WXML ä¸­æ·»åŠ ç»„ä»¶
```

## æ•ˆæœé¢„è§ˆ

### åŠ¨ç”»æ•ˆæœ
1. **æ·¡å…¥æ•ˆæœ** - 0.3s
2. **æ—‹è½¬åœ†ç¯** - æŒç»­æ—‹è½¬
3. **äº‘æœµè„‰å†²** - 2s å¾ªç¯
4. **è·³åŠ¨ç‚¹** - 1.4s å¾ªç¯
5. **æ·¡å‡ºæ•ˆæœ** - 0.3s

### ç”¨æˆ·ä½“éªŒæå‡
- âœ¨ é¡µé¢åˆ‡æ¢æ›´æµç•…
- ğŸ¯ æ˜ç¡®çš„åŠ è½½çŠ¶æ€
- ğŸ’« ä¼˜é›…çš„è¿‡æ¸¡æ•ˆæœ
- ğŸš€ æå‡å“ç‰Œå½¢è±¡

## æµ‹è¯•æ¸…å•

é›†æˆå®Œæˆåï¼Œè¯·æµ‹è¯•ä»¥ä¸‹åœºæ™¯ï¼š

- [ ] é¦–é¡µè·³è½¬åˆ°å„ä¸ªåŠŸèƒ½é¡µé¢
- [ ] åŠŸèƒ½é¡µé¢è¿”å›é¦–é¡µ
- [ ] Tab åˆ‡æ¢ï¼ˆé¦–é¡µ â†” æˆ‘çš„ï¼‰
- [ ] è¡¨å•æäº¤åè·³è½¬
- [ ] ç™»å½•æˆåŠŸåè·³è½¬
- [ ] è®¾å¤‡ç»‘å®šåè·³è½¬
- [ ] å¿«é€Ÿè¿ç»­ç‚¹å‡»ï¼ˆé˜²æŠ–æµ‹è¯•ï¼‰
- [ ] ç½‘ç»œæ…¢é€Ÿæƒ…å†µä¸‹çš„è¡¨ç°

## å¸¸è§é—®é¢˜

### Q: åŠ¨ç”»æ˜¾ç¤ºæ—¶é—´è¿‡é•¿æ€ä¹ˆåŠï¼Ÿ
A: è°ƒæ•´ `common.js` ä¸­çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤æ˜¯ 200ms

### Q: å¦‚ä½•åœ¨æŸä¸ªé¡µé¢ç¦ç”¨åŠ¨ç”»ï¼Ÿ
A: ç›´æ¥ä½¿ç”¨åŸç”Ÿçš„ `wx.navigateTo` æˆ– `navigation.navigateTo`

### Q: åŠ¨ç”»ä¼šå½±å“é¡µé¢æ€§èƒ½å—ï¼Ÿ
A: ä¸ä¼šï¼Œä½¿ç”¨çš„æ˜¯ CSS3 ç¡¬ä»¶åŠ é€Ÿï¼Œæ€§èƒ½ä¼˜ç§€

### Q: å¯ä»¥è‡ªå®šä¹‰åŠ¨ç”»æ•ˆæœå—ï¼Ÿ
A: å¯ä»¥ï¼Œä¿®æ”¹ `page-transition.wxss` ä¸­çš„æ ·å¼å³å¯
